package ch.hftm.controls;

import java.util.ArrayList;
import java.util.List;

import org.bson.types.ObjectId;

import com.mongodb.client.MongoClient;

import ch.hftm.entities.Computer;

import jakarta.enterprise.context.ApplicationScoped;
import jakarta.inject.Inject;

@ApplicationScoped
public class ComputerService {
    @Inject MongoClient mongoClient;
    @Inject ComputerRepository computerRepository;

    public List<Computer> getAllComputers(){
        return computerRepository.listAll();
    }

    public void setComputer(Computer computer) {
        computerRepository.persist(computer);
    }

    public Computer getById(ObjectId id) {
        return computerRepository.find("objectId", id.toString()).firstResult();
    }

    public Computer getByComputer(String macAddress, String os, String userRunning) {
        return computerRepository.list(
            "macAddress = ?1 and os = ?2 and userRunning = ?3",
            macAddress, os, userRunning)
            .getFirst();
    }

    public void deleteComputer(Computer computer) {
        computerRepository.delete(computer);
    }
}
