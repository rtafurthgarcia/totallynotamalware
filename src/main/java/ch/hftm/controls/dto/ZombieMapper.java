package ch.hftm.controls.dto;

import java.time.LocalDateTime;

import org.bson.types.ObjectId;

import ch.hftm.controls.dto.ZombieDto.GetZombieDto;
import ch.hftm.controls.dto.ZombieDto.NewZombieDto;
import ch.hftm.controls.dto.ZombieDto.UpdateZombieDto;
import ch.hftm.entities.Zombie;
import jakarta.enterprise.context.ApplicationScoped;

@ApplicationScoped
public class ZombieMapper {
    public GetZombieDto toGetZombieDto(Zombie zombie) {
        return new GetZombieDto(
            zombie.id.toString(), 
            zombie.macAddress, 
            zombie.ipAddress,
            zombie.os,
            zombie.runningWithPrivileges,
            zombie.harddrivesWithFreeSpace,
            zombie.freeRam,
            zombie.usedRam,
            zombie.cpuName,
            zombie.userRunning,
            zombie.buildRunning,
            zombie.lastActivity);
    }

    public Zombie fromNewZombieDto(NewZombieDto newZombieDto) {
        Zombie Zombie = new Zombie();

        Zombie.id = new ObjectId();
        Zombie.macAddress = newZombieDto.macAddress();
        Zombie.ipAddress = newZombieDto.ipAddress();
        Zombie.os = newZombieDto.os();
        Zombie.runningWithPrivileges = newZombieDto.runningWithPrivileges();
        Zombie.harddrivesWithFreeSpace = newZombieDto.hardDrives();
        Zombie.freeRam = newZombieDto.freeRam();
        Zombie.usedRam = newZombieDto.usedRam();
        Zombie.cpuName = newZombieDto.cpuName();
        Zombie.userRunning = newZombieDto.userRunning();
        Zombie.buildRunning = newZombieDto.buildRunning();
        Zombie.lastActivity = LocalDateTime.now();
        
        return Zombie;
    }

    public Zombie fromUpdateZombieDto(Zombie Zombie, UpdateZombieDto updateZombieDto) {
        Zombie.ipAddress = updateZombieDto.ipAddress();
        Zombie.runningWithPrivileges = updateZombieDto.runningWithPrivileges();
        Zombie.harddrivesWithFreeSpace = updateZombieDto.hardDrives();
        Zombie.freeRam = updateZombieDto.freeRam();
        Zombie.usedRam = updateZombieDto.usedRam();
        Zombie.buildRunning = updateZombieDto.buildRunning();
        Zombie.lastActivity = LocalDateTime.now();
        
        return Zombie;
    }
}
